// DB is the main database interface that abstracts different database drivers
type DB interface {
	// Exec executes a query that doesn't return rows
	Exec(ctx context.Context, sql string, args ...interface{}) (Result, error)

	// Query executes a query that returns multiple rows
	Query(ctx context.Context, sql string, args ...interface{}) (Rows, error)

	// QueryRow executes a query that returns a single row
	QueryRow(ctx context.Context, sql string, args ...interface{}) Row

	// Begin starts a new transaction
	Begin(ctx context.Context) (Tx, error)
}

// Result represents the result of an Exec operation
type Result interface {
	// RowsAffected returns the number of rows affected
	RowsAffected() int64
	// LastInsertId returns the integer generated by the database
	// in response to a command. Typically this will be from an
	// "auto increment" column when inserting a new row.
	LastInsertId() (int64, error)
}

// Rows represents a set of query results
type Rows interface {
	// Close closes the rows iterator
	Close()

	// Err returns any error that occurred during iteration
	Err() error

	// Next prepares the next result row for reading
	Next() bool

	// Scan copies the columns in the current row into the values pointed at by dest
	Scan(dest ...interface{}) error
}

// Row represents a single row result
type Row interface {
	// Scan copies the columns in the current row into the values pointed at by dest
	Scan(dest ...interface{}) error
}

